
var Anclock=function(b,a){this._oClockDiv=false;this._date=false;this._timer=1000;this._sCurrentSkin="default";this.options={width:"150px",height:"150px",iAnimate:0,bStopped:false,bShowTimeAsTitle:true,bShowDay:true,bShowDigital:false,bShowSeconds:false,bShowSecHand:true,bUseOffset:false,iOffset:0,skins:{"default":{options:{styles:{analog:"background: #fff; border: 5px solid rgba(0,0,0,0.02); border-radius: 50%; border: 5px solid #ddd; box-shadow: -2px -2px 3px #fff, 1px 1px 3px rgba(0,0,0,0.5);",hhand:"background: #000; height: 30%; width: 8%; left: 46%;",mhand:"background: #000; height: 45%; width: 6%; left: 47%;",shand:"background: #f00; height: 48%; width: 2%; left: 49%;",day:"border-radius: 5px; border: 1px solid rgba(0,0,0,0.1); padding: 0 2px;"}}}},skin:"default"};this.setDate=function(c){if(c&&c.getMonth){this._date=c}else{this._date=new Date();if(this.options.bUseOffset){this._date.setMinutes(this._date.getMinutes()+this.options.iOffset+this._date.getTimezoneOffset())}}};this.setOptions=function(e){if(e){for(var c in e){if(c!="skins"){this.options[c]=e[c]}}if(e.skins){for(var d in e.skins){this.options.skins[d]={options:{}};for(var c in e.skins[d]["options"]){this.options.skins[d].options[c]=e.skins[d].options[c]}}}}this._drawHtml();this._applyOptions();this.refresh();return true};this.getDate=function(){return this._date};this.getTimeAsString=function(){var f="";var d=":";if(!this._date){return false}var c=this._date.getHours();var e=this._date.getMinutes();if(c<10){f+="0"}f+=c+d;if(e<10){f+="0"}f+=e;return f};this.getOptions=function(){return this.options};this.getSkin=function(e){var h=["width","height","iAnimate","bShowDay","bShowSeconds","bShowSecHand"];var c=["analog","dot1","dot2","hands","hhand","mhand","shand","day","digital"];var g=0;var d=this.options.skin;if(e&&this.options.skins[e]){d=e}if(!d){d="default"}this.options.skin=d;var f={styles:{}};if(this.options.skins[d]&&this.options.skins[d]["options"]){for(sOpt in this.options.skins[d]["options"]){f[sOpt]=this.options.skins[d]["options"][sOpt]}}for(g=0;g<h.length;g++){f[h[g]]=(this.options.skins[d]["options"][h[g]]!==undefined)?f[h[g]]=this.options.skins[d]["options"][h[g]]:f[h[g]]=this.options[h[g]]}for(g=0;g<c.length;g++){if(!(c[g] in f.styles)){f.styles[c[g]]=false}}return f};this._cssValue=function(e,d){var c=false;switch(e){case"display":c=d?"inline":"none";break;case"visibility":c=d?"visible":"hidden";break}if(c){return c}return false};this._applyOptions=function(){var g=this.getSkin();var f=false;var c=false;var d=this._oClockDiv.getElementsByTagName("DIV");for(var e=0;e<d.length;e++){f=false;c=d[e].style;switch(d[e].className){case"analog":f={width:g.width,height:g.height};break;case"hhand":break;case"mhand":break;case"shand":f={visibility:this._cssValue("visibility",g.bShowSecHand)};break}if(f){for(var h in f){c[h]=f[h]}}}var j=false;d=this._oClockDiv.getElementsByTagName("SPAN");for(e=0;e<d.length;e++){j=false;f=false;c=d[e].style;switch(d[e].className){case"day":f={visibility:this._cssValue("visibility",g.bShowDay)};break;case"hours":break;case"minutes":break;case"seconds":f={display:this._cssValue("display",g.bShowSeconds)};break;case"divider":break}if(f){for(h in f){c[h]=f[h]}}if(j){d[e].innerHTML=j}}if(this.options.bStopped){this._timer=false}else{this._timer=1000*5;if(g.bShowSeconds||g.bShowSecHand){this._timer=1000}}};this._drawHtml=function(){var d=this._oClockDiv.id;var m=this.getSkin();var l=m.styles;if(!"transform" in document.body.style&&!"MozTransform" in document.body.style&&!"OTransform" in document.body.style&&!"WebkitTransform" in document.body.style){l.analog+="; visibility: hidden;"}var g="\n            #"+d+".anclock{display:inline-block; text-shadow: none; text-align: center;margin: 0;}\n            #"+d+".anclock .analog{border-radius: 50%; margin-right: 0; position: relative; right: 0; width: 80px; height: 80px; "+l.analog+"}\n            #"+d+".anclock .analog *{\n                -webkit-transform-origin: 50% 0; -ms-transform-origin: 50% 0; -o-transform-origin: 50% 0; transform-origin: 50% 0%;\n                -webkit-transition: all "+this.options.iAnimate+"s ease-in; -moz-transition: all "+this.options.iAnimate+"s ease-in; -o-transition: all "+this.options.iAnimate+"s ease-in; -ms-transition: all "+this.options.iAnimate+"s ease-in; transition: all "+this.options.iAnimate+"s ease-in; \n                border-radius: 40%;  "+l.hands+" \n                margin: 0; position: absolute; z-index: 100; }\n            #"+d+".anclock .analog .day{font-size: 70%; position: absolute; right: 12px; top: 41%; z-index: 50; "+l.day+"}\n            #"+d+".anclock .analog .hhand{background: #000; height: 30%; width: 8%; left: 46%; top: 50%; "+l.hhand+"}\n            #"+d+".anclock .analog .mhand{background: #000; height: 40%; width: 6%; left: 47%; top: 50%; "+l.mhand+"}\n            #"+d+".anclock .analog .shand{background: #f00; height: 48%; width: 2%; left: 49%; top: 50%; "+l.shand+"}\n\n            \n            #"+d+".anclock .analog .dot1{background: #fff; border: 1px solid #ddd; height: 2%; width: 2%; "+l.dot1+"}\n            #"+d+".anclock .analog .dot2{background: #888; height: 4%; width: 4%; "+l.dot2+"}\n            \n            #"+d+".anclock .digital{position: relative; "+l.digital+"}\n            #"+d+".anclock .digital *{width: 20px; display: inline-block;}\n            #"+d+".anclock .digital .hours{}\n            #"+d+".anclock .digital .divider{width: 10px;}\n            #"+d+".anclock .digital .minutes{}\n            #"+d+".anclock .digital .seconds{width: 10px; font-size: 60%;}\n        ";var j=false;var h=false;var e=false;var c="";for(var f=1;f<=12;f++){e="dot1";if(f%3===0){e="dot2"}j=-Math.cos(Math.PI/6*f)*45+48;h=Math.sin(Math.PI/6*f)*45+48;c+='<div class="'+e+'" style="top: '+j+"%; left: "+h+'%"></div>'}var k="<style>"+g+'</style><div class="analog">'+c+'<span class="day"></span><div class="hhand"></div><div class="mhand"></div><div class="shand"></div></div>'+(this.options.bShowDigital?'<div class="digital"><span class="hours"></span><span class="divider"></span><span class="minutes"></span><span class="seconds"></span></div>':"");this._oClockDiv.innerHTML=k;this._oClockDiv.className="anclock"};this.refresh=function(){var p=this._date.getHours();var f=this._date.getMinutes();var n=this._date.getSeconds();var k=""+Math.round((p+5)/10-1)+(p-Math.round((p+5)/10-1)*10);var e=""+Math.round((f+5)/10-1)+(f-Math.round((f+5)/10-1)*10);var v=""+Math.round((n+5)/10-1)+(n-Math.round((n+5)/10-1)*10);var g=(Math.round(n/1)%2===0)?".":":";var r="rotate("+(p*30+(f/2)+180)+"deg)";var l="rotate("+(f*6+180)+"deg)";var u="rotate("+(n*6+180+f*360+p*360*24)+"deg)";var o="";if(this.options.bShowTimeAsTitle){o=this._date.getDate()+"."+(this._date.getMonth()+1)+". - "+this.getTimeAsString()}this._oClockDiv.title=o;var c=false;var t=false;var d=this._oClockDiv.getElementsByTagName("DIV");for(var j=0;j<d.length;j++){c=false;t=d[j].style;switch(d[j].className){case"hhand":c=r;break;case"mhand":c=l;break;case"shand":c=u;break}if(c){t.transform=c;t["-webkit-transform"]=c;t["-ms-transform"]=c;t["-o-transform"]=c}}var q=false;d=this._oClockDiv.getElementsByTagName("SPAN");for(j=0;j<d.length;j++){q=false;switch(d[j].className){case"day":q=this._date.getDate();break;case"hours":q=k;break;case"minutes":q=e;break;case"seconds":q=v;break;case"divider":q=g;break}if(q){d[j].innerHTML=q}}};this._onTimer=function(){this.setDate();this.refresh();if(!this._timer){return false}var c=this;window.setTimeout(function(){c._onTimer()},this._timer);return true};if(!b){return false}this._oClockDiv=document.getElementById(b);if(!this._oClockDiv){return false}this._drawHtml();this._onTimer();if(!a){this.setOptions({skin:this.options.skin})}this.setOptions(a);return true};